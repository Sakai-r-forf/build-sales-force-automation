{% extends "dashboard/base.html" %} 
{% block title %}建設業 企業情報スクレイパー{% endblock %} 
{% block head %}
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='css/dashboard/scraping/index.css') }}"
/>
{% endblock %} {% block content %}

<div class="scraping-container">
  <div class="scraping-wrapper">
    <div class="scraping-content">
      <form method="POST" action="{{ url_for('scraping.crawl') }}">
        <label>企業掲載サイトのURL</label>
        <input
          required
          name="seed_url"
          placeholder="https://example.com/member"
        />
        <p class="faq-link">
          企業一覧が掲載されているサイトのURLを入力してください<a
            href="{{ url_for('scraping.index') }}"
            >（詳細はこちら）</a
          >
        </p>

        <label>抽出範囲の制限（空欄可）</label>
        <input name="allowed_domain" placeholder="example.com" />
        <p class="faq-link">
          空欄の場合、上記サイト内のみから情報を抽出します<a
            href="{{ url_for('scraping.index') }}"
            >（詳細はこちら）</a
          >
        </p>

        <div class="flex">
          <div class="flex-2">
            <label>最大取得件数</label>
            <input
              name="limit"
              type="number"
              min="1"
              max="500"
              value="100"
              placeholder="既定値：100"
            />
            <p class="faq-link">
              サイトから抽出する企業数の上限を設定します</br>
              <a
                href="{{ url_for('scraping.index') }}"
                >（詳細はこちら）</a
              >
            </p>
          </div>

          <div>
            <!--TODO：サイズを均等にする（50%：50%）-->
            <!-- TODO: 誤爆防止や件数を増やすことによる注意事項を記載 -->
            <label>最大取得ページ数</label>
            <input
              name="max_pages"
              type="number"
              min="1"
              max="2000"
              value="100"
              placeholder="既定値：100"
            />
            <!-- TODO FAQリンク挿入 -->
            <p class="faq-link">
              サーバー負荷軽減のための制限数です</br>
              <a
                href="{{ url_for('scraping.index') }}"
                >（詳細はこちら）</a
              >
            </p>
          </div>
        </div>

        <label>絞り込みキーワード</label>
        <textarea
          name="jp_keywords"
          rows="4"
          placeholder="株式会社・有限会社・建設・工務店・お問い合わせ・会社概要"
        ></textarea>
        <!-- TODO FAQリンク挿入 -->
        <p class="faq-link">
          企業名や業種に関連するキーワードを1ワード、1改行で入力してください<a
            href="{{ url_for('scraping.index') }}"
            >（詳細はこちら）</a
          >
        </p>

        <button type="submit">CSVを生成</button>
        <p class="hint">※ CSV生成の目安は5分前後です</p>
      </form>
    </div>
  </div>
</div>

{% endblock %}
